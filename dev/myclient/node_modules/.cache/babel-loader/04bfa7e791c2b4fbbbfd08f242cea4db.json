{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LeoLu\\\\Desktop\\\\NYT_Guardian_News_Web\\\\dev\\\\myclient\\\\src\\\\routers\\\\DetailArticle.js\";\nimport React from 'react';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\nimport { FaRegBookmark } from \"react-icons/fa\";\nimport AsyncSelect from 'react-select/lib/Async';\nimport '../css/Home.css';\nimport { css } from \"@emotion/core\";\nimport BounceLoader from \"react-spinners/BounceLoader\";\nimport Article from '../components/Article';\nimport { NavLink } from \"react-router-dom\";\nimport { withRouter } from 'react-router-dom';\nimport ReactTooltip from 'react-tooltip';\nconst override = css`\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 20%;\n  display: block;\n`;\n\nclass DetailArticle extends React.Component {\n  constructor(props) {\n    super(props);\n    let query = window.location.search.substring(4).split(\"&\")[0];\n    let news = window.location.search.substring(4).split(\"&\")[1].substring(7);\n    let option = null;\n    this.state = {\n      id: query,\n      selectedOption: option,\n      results: [],\n      newsPaper: news,\n      loading: true\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.loadoptions = this.loadoptions.bind(this);\n  }\n\n  componentDidMount() {\n    let url = '/api/detail?id=' + this.state.id + \"&news=\" + this.state.newsPaper;\n    this.setState({\n      loading: true\n    });\n    document.getElementsByClassName(\"loading\")[0].style.display = '';\n    fetch(url, {\n      mode: 'cors'\n    }).then(response => {\n      return response.json();\n    }).then(res => {\n      let data = []; //console.log(data);\n\n      if (this.state.newsPaper === \"NYTimes\") {\n        data.push(res.response.docs[0]);\n      } else {\n        data.push(res.response.content);\n      }\n\n      this.setState({\n        results: data,\n        loading: false\n      });\n      document.getElementsByClassName(\"loading\")[0].style.display = 'none';\n    });\n  }\n\n  handleChange(value) {\n    let query = value.value;\n    let id = \"Guardian\";\n\n    if (window.localStorage.checking && window.localStorage.checking === 'false') {\n      id = \"NYTimes\";\n    }\n\n    this.setState({\n      selectedOption: value\n    }, () => {\n      this.props.history.push('/search?q=' + encodeURI(query));\n    });\n  }\n\n  loadoptions(inputValue, callback) {\n    if (!inputValue) {\n      callback([]);\n    } else {\n      let url = \"https://leo1.cognitiveservices.azure.com/bing/v7.0/suggestions?q=\" + inputValue;\n      fetch(url, {\n        headers: {\n          \"Ocp-Apim-Subscription-Key\": \"bb7176baabd945aaacabb06e566313ce\"\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(json => {\n        let result = [];\n\n        if (json.suggestionGroups) {\n          for (let suggestion of json.suggestionGroups[0].searchSuggestions) {\n            let temp = new Object();\n            temp.label = suggestion.displayText;\n            temp.value = suggestion.query;\n            result.push(temp);\n          }\n        }\n\n        callback(result);\n      }).catch(error => {\n        alert(error);\n      });\n    }\n  }\n\n  render() {\n    let data = {};\n    let results = this.state.results;\n    let temp1 = [];\n    data.id = this.state.id;\n    results.forEach(result => {\n      if (this.state.newsPaper === \"NYTimes\") {\n        data.type = \"NYTimes\";\n        data.defaultImg = \"https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg\";\n        data.title = result.headline.main;\n        data.abstract = result.abstract;\n        data.articleURL = result.web_url;\n        data.date = result.pub_date.substring(0, 10);\n        data.section = result.section_name;\n\n        for (let img of result.multimedia) {\n          if (img.width >= 2000) {\n            data.defaultImg = \"https://www.nytimes.com/\" + img.url;\n            break;\n          }\n        }\n      } else {\n        data.type = \"Guardian\";\n        data.defaultImg = \"https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png\";\n        data.title = result.webTitle;\n        data.abstract = result.blocks.body[0].bodyTextSummary;\n        data.articleURL = result.webUrl;\n        data.date = result.webPublicationDate.substring(0, 10);\n        data.section = result.sectionId;\n        let assets = result.blocks.main.elements[0].assets;\n\n        if (assets.length !== 0) {\n          if (assets[assets.length - 1].file) {\n            data.defaultImg = assets[assets.length - 1].file;\n          }\n        }\n      }\n\n      temp1 = /*#__PURE__*/React.createElement(Article, {\n        data: data,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 15\n        }\n      });\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Navbar, {\n      collapseOnSelect: true,\n      expand: \"lg\",\n      bg: \"dark\",\n      variant: \"dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"select-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(AsyncSelect, {\n      placeholder: \"Enter keyword ..\",\n      loadOptions: this.loadoptions,\n      onChange: this.handleChange,\n      value: this.state.selectedOption,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Navbar.Toggle, {\n      \"aria-controls\": \"responsive-navbar-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Navbar.Collapse, {\n      id: \"responsive-navbar-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Nav, {\n      className: \"mr-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Nav.Link, {\n      as: NavLink,\n      to: \"/\",\n      href: \"/\",\n      activeClassName: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }\n    }, \"Home\"), /*#__PURE__*/React.createElement(Nav.Link, {\n      as: NavLink,\n      to: \"/world\",\n      href: \"/world\",\n      activeClassName: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }, \"World\"), /*#__PURE__*/React.createElement(Nav.Link, {\n      as: NavLink,\n      to: \"/politics\",\n      href: \"/politics\",\n      activeClassName: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }\n    }, \"Politics\"), /*#__PURE__*/React.createElement(Nav.Link, {\n      as: NavLink,\n      to: \"/business\",\n      href: \"/business\",\n      activeClassName: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }, \"Business\"), /*#__PURE__*/React.createElement(Nav.Link, {\n      as: NavLink,\n      to: \"/technology\",\n      href: \"/technology\",\n      activeClassName: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }\n    }, \"Technology\"), /*#__PURE__*/React.createElement(Nav.Link, {\n      as: NavLink,\n      to: \"/sports\",\n      href: \"/sports\",\n      activeClassName: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }\n    }, \"Sports\")), /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Nav.Link, {\n      as: NavLink,\n      to: \"/favorites\",\n      href: \"/favorites\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FaRegBookmark, {\n      id: \"nav-fav\",\n      \"data-tip\": \"Bookmark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 68\n      }\n    }))))), /*#__PURE__*/React.createElement(BounceLoader, {\n      size: 40,\n      css: override,\n      loading: this.state.loading,\n      color: \"#3E7BBA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }\n    }, \"Loading\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-article\",\n      id: \"detail-article\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 7\n      }\n    }, temp1), /*#__PURE__*/React.createElement(ReactTooltip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 7\n      }\n    }));\n  }\n\n}\n\nexport default withRouter(DetailArticle);","map":{"version":3,"sources":["C:/Users/LeoLu/Desktop/NYT_Guardian_News_Web/dev/myclient/src/routers/DetailArticle.js"],"names":["React","Navbar","Nav","FaRegBookmark","AsyncSelect","css","BounceLoader","Article","NavLink","withRouter","ReactTooltip","override","DetailArticle","Component","constructor","props","query","window","location","search","substring","split","news","option","state","id","selectedOption","results","newsPaper","loading","handleChange","bind","loadoptions","componentDidMount","url","setState","document","getElementsByClassName","style","display","fetch","mode","then","response","json","res","data","push","docs","content","value","localStorage","checking","history","encodeURI","inputValue","callback","headers","result","suggestionGroups","suggestion","searchSuggestions","temp","Object","label","displayText","catch","error","alert","render","temp1","forEach","type","defaultImg","title","headline","main","abstract","articleURL","web_url","date","pub_date","section","section_name","img","multimedia","width","webTitle","blocks","body","bodyTextSummary","webUrl","webPublicationDate","sectionId","assets","elements","length","file"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Navbar from 'react-bootstrap/Navbar';\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport { FaRegBookmark } from \"react-icons/fa\";\r\nimport AsyncSelect from 'react-select/lib/Async';\r\nimport '../css/Home.css';\r\nimport { css } from \"@emotion/core\";\r\nimport BounceLoader from \"react-spinners/BounceLoader\";\r\nimport Article from '../components/Article';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport { withRouter } from 'react-router-dom';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\nconst override = css`\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  margin-top: 20%;\r\n  display: block;\r\n`;\r\n\r\n\r\nclass DetailArticle extends React.Component{\r\n  constructor(props){\r\n    super(props);\r\n\t  let query = window.location.search.substring(4,).split(\"&\")[0];\r\n\t  let news = window.location.search.substring(4,).split(\"&\")[1].substring(7,);\r\n\t  let option = null;\r\n\t  this.state = {id: query, selectedOption: option, results:[], newsPaper: news, loading: true};\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.loadoptions = this.loadoptions.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    let url = '/api/detail?id=' + this.state.id + \"&news=\" + this.state.newsPaper;\r\n    this.setState({loading: true,});\r\n    document.getElementsByClassName(\"loading\")[0].style.display = '';\r\n    fetch(url, {mode: 'cors'}).then(\r\n      (response) =>{\r\n        return response.json();\r\n      }\r\n    ).then(\r\n      (res) => {\r\n        let data = [];\r\n        //console.log(data);\r\n        if(this.state.newsPaper === \"NYTimes\"){\r\n          data.push(res.response.docs[0]);\r\n        }\r\n        else{\r\n          data.push(res.response.content);\r\n        }\r\n        \r\n        this.setState({results:data, loading: false});\r\n        document.getElementsByClassName(\"loading\")[0].style.display = 'none';\r\n      }\r\n    );\r\n  }\r\n\r\n  handleChange(value){\r\n    let query = value.value;\r\n    let id = \"Guardian\";\r\n    if(window.localStorage.checking && window.localStorage.checking === 'false'){\r\n      id = \"NYTimes\";\r\n\t\t}\r\n    this.setState({selectedOption: value}, ()=>{\r\n      this.props.history.push('/search?q=' + encodeURI(query));\r\n    });\r\n    \r\n  }\r\n  \r\n  loadoptions(inputValue, callback){\r\n    if(!inputValue){\r\n      callback([]);\r\n    }\r\n    else{\r\n      \r\n      let url = \"https://leo1.cognitiveservices.azure.com/bing/v7.0/suggestions?q=\" + inputValue;\r\n      fetch(url, {headers: {\"Ocp-Apim-Subscription-Key\": \"bb7176baabd945aaacabb06e566313ce\"}}).then(\r\n        function(response){\r\n          return response.json();\r\n        }\r\n      ).then(\r\n        (json) => {\r\n        \r\n          let result = [];\r\n          if(json.suggestionGroups){\r\n            for(let suggestion of json.suggestionGroups[0].searchSuggestions){\r\n              let temp = new Object();\r\n              temp.label = suggestion.displayText;\r\n              temp.value = suggestion.query;\r\n              result.push(temp);\r\n            }\r\n          }\r\n          callback(result);\r\n      }).catch(\r\n        (error) => {\r\n          alert(error);\r\n        }\r\n      );\r\n    }\r\n    \r\n  };\r\n\r\n  render(){\r\n    \r\n    let data = {};\r\n    let results = this.state.results;\r\n    let temp1 = [];\r\n    data.id = this.state.id;\r\n    results.forEach((result) => {\r\n      if(this.state.newsPaper === \"NYTimes\"){\r\n        data.type = \"NYTimes\";\r\n        data.defaultImg = \"https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg\";\r\n        data.title = result.headline.main;\r\n        data.abstract = result.abstract;\r\n        data.articleURL = result.web_url;\r\n        data.date = result.pub_date.substring(0, 10);\r\n        data.section = result.section_name;\r\n        for(let img of result.multimedia){\r\n          if(img.width >= 2000){\r\n            data.defaultImg = \"https://www.nytimes.com/\" + img.url;\r\n            break;\r\n          }\r\n        }\r\n        \r\n      }\r\n          \r\n      else{\r\n        data.type = \"Guardian\";\r\n        \r\n        data.defaultImg = \"https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png\";\r\n        \r\n        data.title = result.webTitle;\r\n        data.abstract = result.blocks.body[0].bodyTextSummary;\r\n        data.articleURL = result.webUrl;\r\n        data.date = result.webPublicationDate.substring(0, 10);\r\n        data.section = result.sectionId;\r\n        let assets = result.blocks.main.elements[0].assets;\r\n          \r\n        if(assets.length !== 0){\r\n          if(assets[assets.length-1].file){\r\n            data.defaultImg = assets[assets.length-1].file;\r\n          }\r\n        }\r\n        \r\n      }\r\n      temp1 = <Article data={data}/>;\r\n    });\r\n    \r\n      \r\n\r\n    \r\n    return (\r\n      <div className='main'>\r\n        \r\n      <Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\r\n        \r\n        <div className='select-container'>\r\n          <AsyncSelect \r\n            \r\n            placeholder = 'Enter keyword ..'\r\n            loadOptions = {this.loadoptions}\r\n            onChange = {this.handleChange}\r\n            value = {this.state.selectedOption}\r\n          />\r\n        </div>\r\n        \r\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n        <Nav className=\"mr-auto\">\r\n          <Nav.Link as={NavLink} to=\"/\" href=\"/\" activeClassName=''>Home</Nav.Link>\r\n          <Nav.Link as={NavLink} to=\"/world\" href=\"/world\" activeClassName=''>World</Nav.Link>\r\n          <Nav.Link as={NavLink} to=\"/politics\" href=\"/politics\" activeClassName=''>Politics</Nav.Link>\r\n          <Nav.Link as={NavLink} to=\"/business\" href=\"/business\" activeClassName=''>Business</Nav.Link>\r\n          <Nav.Link as={NavLink} to=\"/technology\" href=\"/technology\" activeClassName=''>Technology</Nav.Link>\r\n          <Nav.Link as={NavLink} to=\"/sports\" href=\"/sports\" activeClassName=''>Sports</Nav.Link>\r\n          \r\n        </Nav>\r\n        <Nav>\r\n          <Nav.Link as={NavLink} to=\"/favorites\" href=\"/favorites\"><FaRegBookmark id='nav-fav' data-tip=\"Bookmark\"/></Nav.Link>\r\n          \r\n          \r\n        </Nav>\r\n      </Navbar.Collapse>\r\n      </Navbar>\r\n      \r\n      <BounceLoader\r\n        size={40}\r\n        css={override}\r\n        loading={this.state.loading}\r\n        color={\"#3E7BBA\"}\r\n      />\r\n        \r\n      <h4 className='loading'>\r\n        <b>Loading</b>\r\n      </h4>\r\n\r\n      <div className='detail-article' id='detail-article'>\r\n        {temp1}\r\n      </div>\r\n      <ReactTooltip/>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n}\r\nexport default withRouter(DetailArticle);\r\n"]},"metadata":{},"sourceType":"module"}